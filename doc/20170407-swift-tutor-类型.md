## swift 初步印象

swift 很新，对应的好处就是可以吸取很多别的语言的优点，比如 单继承，类型推断，以及非常多的语法糖。

swift 作为 objc 的替代，写起来是非常简单的，它去掉了 objc 中很多反人类、冗余的东西。

去伪存真之后，swift 变的非常优雅，我们首先来看看基本的类型。

## swift 的类型
### 关键的类型

现代高级语言都支持 `类` 和 `接口`，在 swift 中对应的分别是 `class` 和 `protocol`。
（*接口不叫 interface，是因为在 objc 中，头文件和`.m`文件分别是 interface 和 implementation。*）
他们的声明很简单：`class A {}` 和 `protocol B {}`。

另一个语言特性是扩展（`extension`），顾名思义，它扩展了已有的类型，如为 `Person` 类添加一个 `Address` 就可以通过扩展：`extension Person { var address: Address? }`
而不必写个新类型叫做 `PersonWithAddress`；扩展是 objc 就有的特性。

然后是枚举（`enum`），可以说，如果 swift 的枚举没有这么强大，那么它仅仅是另一门现代高级语言（类似 C#）。枚举的特性包括：
- 可以指定 rawValue，进而简化常量的定义
- 可以添加扩展，进而添加方法、属性
- 结合简化的 `switch` 语法，写起来很方便
- 枚举的 case 可以包含参数，这个绝对是别的语言没有的
- ……

最后是可选类型（`optional`），这个特性增强了 swift 的安全性。java 中，一个 `Person` 变量可以是 null 的，但是 swift 中则不是，如果要接收空值，必须声明 `Person?` 变量。

---
现实中的实体不是孤立存在的。举个浅显的例子，数据库中 `E-R 图` 的概念就是对实体（Entity）和关系（Relation）进行抽象（*分别对应于数据表和关系表，关系又可分为`一对一`、`一对多`和`多对多`*）。

语言是实现项目需求的载体，任何需求都包括 **数据和基于这些数据的操作**。使用任何一门语言，首先要做的都是 **对数据进行抽象**（可照搬 E-R 的概念），swift 也不例外。但是在 swift 中（以及其他有类似特性的语言中），**实体留给类，关系留给扩展**，可以保持实体本身的纯粹性（参考数据库的各种范式），也能避免类的泛滥。

当然，扩展的作用不限于此，不使用扩展也是可以的，但是扩展可以让你从整体上将类之间的关系考虑进来。

项目需求不可能是完全抽象的，总是需要一些具体的常量。比如对于抽象的分数，100分满分，60分及格都是非常具体的。开发部门、销售部门，都是具体的。虽然各种语言都可以定义常量、枚举，但他们多数不完美；常量是相互独立的，虽然可以放到具体的类型内以体现共性，但是不像枚举可以限定常量的类型；枚举的共性、类型都限定了，但是又太死板，多数语言的枚举都只支持 int，少数支持 string。swift 的枚举符合普通枚举的特性，可以指定类型，而且不局限于 Int、String 等，这样既保证了 case 之间的 **共性**，又保留了 **类型的灵活性**。

swift 枚举的另一个特性是关联值（associated value），官方的例子就很好：针对不同的条码类型，我们总是想知道条码表示的信息，这些信息就是关联值。关联值使得在代码中做到 **求同存异** 很方便，求同存异乍一看没什么特别的，但是考虑到一般的语言对于“求同”做的都很好（如类的抽象），“存异”则比较繁琐（不是不可能），强调 OO 很容易导致类泛滥，强调封装则会代码膨胀。

swift 的很重要的一个特性是可选值（optional），表示一个变量可以是空的。只说一点，**Optional 是用枚举实现的**。

### 总结：
- 面向对象：对孤立的实体的抽象
- swift 的扩展：对这些实体之间的关系进行抽象
- swift 的枚举：对业务逻辑进行抽象

swift 与其他语言相比，对各种概念的抽象方法更加明确，**清晰明确的概念** 可以避免代码走向混乱，这正是 swift 最大的优点：**符合直觉**，不同的人写出来的代码是类似的，对概念的理解不会有大的差异。再结合 **类型的嵌套** 可以更完美。


### 其他类型相关的概念
包括（可暂时忽略）：
- 闭包（`closure`）它有很多别的名字，block，lambda，函数指针等。
- `tuple` 可定义轻量的类型，
- `typealias` 可以简化类型的定义
- 内置类型，如 Int、String、Optional 等。
  - 类型通常是首字母大写的，变量则是首字母小写。
- struct
- 泛型（generic）
