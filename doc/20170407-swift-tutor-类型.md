# 前言

`Swift` 很新，可集多个语言优点于一身，比如 **单继承，类型推断**，以及非常多的 **语法糖**。
Swift 作为 `objc` 的替代，相比之下特别简单，它去掉了 objc 中很多反人类、冗余的东西。
去伪存真之后，Swift 变的非常优雅，我们首先来看看基本的类型。

---
# Swift 的类型简介
## **Class & Protocol**
**类** 和 **接口** 在 Swift 中对应的分别是 `class` 和 `protocol`
> *接口不叫 interface 因为在 objc 中，`.h` 和 `.m` 文件分别是 interface 和 implementation。*

他们的声明很简单：
```swift
class A {
  // 这是一个类
}

protocol B {
  // 这是一个接口
}
```

## Extension
**扩展**（`extension`）顾名思义，它扩展了已有的类型，如为 `Person` 类添加一个 `Address` 就可以通过扩展：`extension Person { var address: Address? }`，
而不必写个新类型叫做 `PersonWithAddress`。扩展是 Swift 继承自 objc 的特性。
```swift
class A {
  // 定义类
}
extension A {
  // 定义扩展
}
```

## Enum
**枚举**（`enum`）是 Swift 中很强大的一个特性，可以说，如果 Swift 的枚举没有这么强大，那么它仅仅是另一门现代高级语言（类似 C#）。枚举的特性包括：
- 可以指定 rawValue，进而简化常量的定义
- 可以添加扩展，进而添加方法、属性
- 结合简化的 `switch` 语法，写起来很方便
- 枚举的 case 可以包含关联值，这个绝对是别的语言没有的
- ……

## Optional
最后是可选类型（`optional`），这个特性增强了 Swift 的安全性。java 中，一个 `Person` 变量可以是 `null` 的，但是 Swift 中则不是，如果要接收空值，必须声明 `Person?` 变量。

---
# 简要分析 Swift 类型的优越性
## 首先说 `class` 和 `extension`。
语言是实现项目需求的载体，任何需求都包括 **数据** 和基于这些数据的 **操作**。使用任何一门语言，首先要做的都是 **对数据进行抽象**，Swift 也不例外。

注意数据之间是有关联的，一个简单的例子，将数据抽象成 **实体-关系图**（E-R 图）时，实体之间的 **关系** 也是很重要的一部分，它体现了实体之间的 `一对一`、`一对多` 和 `多对多` 关系。
在 Swift 中（以及其他有类似特性的语言中），**对实体抽象通过类，对关系抽象通过扩展**，可以保持实体本身的纯粹性（参考数据库的各种范式），也能避免类的泛滥。

当然，扩展的作用不限于此，不使用扩展也是可以的，但是扩展可以让你从整体上将类之间的关系考虑进来。

## 然后是 `enum`。
项目需求不可能是完全抽象的，总是需要一些具体的常量。比如对于抽象的分数，100 分满分，60 分及格都是非常具体的，开发部门、销售部门，都是具体的。虽然各种语言都可以定义 **常量和枚举**，但他们多数不完美；

常量是相互独立的，相关的常量虽然可以放到一起，但是与枚举不同，各个常量的类型难以统一；枚举可以体现共性、并统一类型，但多数语言的枚举都只支持 int，少数支持 string，过于死板。Swift 的枚举则结合了相关的优点，既保证了 case 之间的 **共性**，又保留了 **类型的灵活性**。

而且，Swift 的枚举还提供了更强大的特性：**关联值**（associated value），官方的例子就很好：针对不同的条码类型，我们总是想知道条码表示的信息，这些信息就是关联值。关联值使得在代码中做到 **求同存异** 很方便，求同存异乍一看没什么特别的，但是考虑到一般的语言对于“求同”做的都很好（如类的抽象），“存异”则比较繁琐（不是不可能）：强调 OO 很容易导致类泛滥，强调封装则会代码膨胀。

## 最后是 `optional`。
可选值是一个渗透在每一行代码中的安全特性，Swift 的基本类型不能表示空值 `nil`，需要 nil 时必须使用可选值，这就极大的提高了安全性（一个变量不是可用的，就是可选的）；并且 Swift 提供了相关的语法糖（`?` 和 `!`，你没看错，就是问号和叹号），进一步缩减了代码，提升了每一行代码的安全性。而且，**`Optional` 也是用枚举实现的**。

## 总结：
- 面向对象：对孤立的实体的抽象
- 扩展：对实体间的关系进行抽象
- 枚举：对业务逻辑进行抽象

Swift 与其他语言相比，对各种概念的抽象方法更加明确，**清晰明确的概念** 可以避免代码走向混乱，这正是 Swift 最大的优点：**符合直觉**，不同的人写出来的代码是类似的，对概念的理解不会有大的差异。

---

---

可暂时忽略的类型：
- 闭包（`closure`）它有很多别的名字，block，lambda，函数指针等。
- `tuple` 可定义轻量的类型，`typealias` 可以简化类型的定义
- 内置类型，如 Int、String、Optional 等。*Swift 的类型通常是首字母大写的*
- struct、泛型（generic）、…
