## 什么是依赖

简单的说，如果 A 认识 B，那么 A 对 B 有依赖。
比如一个人可以有家庭地址，我们就可以说 `Person` 依赖了 `Address`。
如果 B 同时也认识 A，那么 A 和 B 的依赖是相互的。
比如一个地址可能住了多个人。

依赖可以很抽象，也可以很具体，比如一个人可以有家庭地址，就是抽象的依赖；张三的家庭地址，就是一个具体的依赖。对应到程序中，我们可以说类型（class 或 type）之间有依赖，也可以说对象（object）或实例（instance）之间有依赖，甚至可以说实例和类有依赖（如静态方法）。

依赖很像是 E-R 图中的 Relation，一定是 **二元关系，或多元关系**。要注意的是 **继承关系**，“子类依赖父类”、“子类实现依赖父类实现”这些说法都没有问题，也存在二元关系。但是由于在运行时没有 **多元关系**，子类、父类可以单独出现、单独存在，所以在描述实体间的关系时（比如 UML 的类图中），通常会明确区分继承和依赖。

依赖换一个词就好理解了：**耦合**（coupling）。A 和 B 耦合太高，就说明他们之间的依赖不清晰。

### 如何识别依赖、表示依赖（答：先识别类型；用实线箭头）
体现在代码中，依赖存在于很多地方，比如成员变量、方法参数、返回值、回调函数、等等；识别起来也非常简单，在强类型的语言中，**需要写明类型的地方都是依赖**。（很简单，不展开了）

由于代码中的变量、方法都是属于一个特定的类型，可将描述简化为 **类型 A 依赖于类型 B**。比如一个人的名字是 String 类型的，我们可以说 `Person.name` 依赖于 `String`，也可以说 Person 依赖于 String，不过还是推荐用最简单的方式：`Person -> String`。

用符号（`->`）表示依赖更简单，而且双向依赖（`<->`）、弱依赖(实线换成虚线)也很容易表示。
`UML` 的类图中，实线箭头叫做关联，虚线箭头叫做依赖，继承是实线三角形箭头，实现接口是虚线三角形箭头，很繁琐不是么。反正都是二元关系，我们可以只用实线箭头（`->`），必要时加上虚线箭头，尤其是写文档、用笔在纸上画的时候。（*但是要注意，表示继承关系时箭头多数是朝上的，表示依赖关系是多数是左右的；而且继承和依赖同时出现的机会很少，不然 UML 也不会那么不流行*）

### 模块间的依赖
前面说的 Person 依赖于 String 仔细想想其实没什么意义，名字的类型一定是 String，而且每个人都有名字，这个依赖太细枝末节了（too subtle）。对系统类型的依赖是不可避免的，所以可以忽略他们。

那么什么样的依赖比较重要呢，`MVC` 就是一个很好的例子，模型（Model）、视图（View）、控制器（Controller）的 **粒度** （granularity）都很适中。这些也正好是我们需要写代码实现的东西。

明确依赖其实就是在做架构（SA，software architecture），进而明确 **模块间的依赖**，并从无到有 **将模块识别出来** 并实现。

## 总结
依赖是软件模块间的耦合，可用 `->` 表示，开发过程中要做的就是识别依赖、简化依赖。
